import React from 'react'
import { connect } from 'react-redux'
import { authLogout } from '../../core/actions/auth'

class Header extends React.Component {
  constructor() {
    super();
    this.state = { width: 0, height: 0 }
    this.logout = this.logout.bind(this)
    this.updateWindowDimensions = this.updateWindowDimensions.bind(this)
  }

  logout = async () => {
    await this.props.authLogout()
  }
  
  componentDidMount() {
    this.updateWindowDimensions();
    window.addEventListener('resize', this.updateWindowDimensions);
  }
  
  componentWillUnmount() {
    window.removeEventListener('resize', this.updateWindowDimensions);
  }
  
  updateWindowDimensions() {
    this.setState({ width: window.innerWidth, height: window.innerHeight });
  }

  render() {
    if (this.state.width >= 700) {
      return (
        <div id="header">
            <div style={{zIndex: 99, height: '100%'}}>
              <nav style={{zIndex: 99, display: 'flex', width: '100vw', height: '100%', justifyContent: 'flex-start', paddingBottom: 10, backgroundColor: '#fff'}}>
                <div style={{marginTop: 23, marginBottom: 0, marginLeft: '8%', marginRight: 30}}>
                  <a href="https://alfinder.com">
                    <svg id="AlfinderLogo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 219.61" style={{width: 115}}><defs></defs><title>Alfinder Logo</title><path style={{fill: '#3c2d64'}} d="M1024,91.81A25.86,25.86,0,1,1,998.14,66,26,26,0,0,1,1024,91.81Zm-42.77,113q-13.4,0-19.5-4.84t-6.09-17.44V70.06H899.05v5.68h.09v0q9.69,0,13.53,5.63t3.85,18.24v85.66q0,7.56-1.66,11.8a10.4,10.4,0,0,1-5.44,6q-3.78,1.72-10.28,1.72v5.7h83.17v-5.68h-1.08ZM579.14,197q-1.74-4.25-1.73-11.8V112.13q0-13.78-2-22a31.27,31.27,0,0,0-6.5-13.39,28.17,28.17,0,0,0-11.61-7.82q-7.1-2.66-18.23-2.66-32,0-44.38,24.91V70.37l-.32,0v-.36H437.88v5.68h.34v.34q9.67,0,13.52,5.64T455.59,100v85.66q0,7.56-1.66,11.8a10.37,10.37,0,0,1-5.44,6,23.75,23.75,0,0,1-9,1.68h-1.34v5.68h.06v.07l1.82-.07h67.82l1.56.07V205.1h-.06v0h-.45a17.89,17.89,0,0,1-8.11-1.68,10.2,10.2,0,0,1-4.64-6,37.82,37.82,0,0,1-1.45-11.8V106.42a34.63,34.63,0,0,1,3.41-12.78,28.49,28.49,0,0,1,9.74-11.34,24,24,0,0,1,13.59-4.11q9.56,0,13.2,5.7a20.73,20.73,0,0,1,2.19,5.21,50.18,50.18,0,0,1,1.32,11.74v84.47a39.67,39.67,0,0,1-1.39,11.8,10.73,10.73,0,0,1-3.06,4.9,8.73,8.73,0,0,1-1.38,1q-3.18,1.72-8.75,1.72v.1h-.14v5.7h71.23v-.11h.11v-5.7q-6.49,0-10.21-1.72A10.65,10.65,0,0,1,579.14,197Zm262.79-4.93a29.84,29.84,0,0,1-17.18-5.5q-8-5.5-13.06-17.37t-5-29.91l-.14-17.9q1.47-25.32,7.9-37.32t16.11-12q9.54,0,14.25,14.05l.09.28a37.16,37.16,0,0,1,.76,19.73c-2,8.73-7.92,14.78-16.89,14.78H828v5.68l25.71,0a25.21,25.21,0,0,0,22.46-36.62q-12-23.58-43.9-23.58-19.62,0-34.61,8.49t-23.47,25.39q-8.49,16.92-8.49,41.58,0,24.12,7.9,40.37t22,24.2q14.13,8,32.82,8a51.91,51.91,0,0,0,25.27-6A56.11,56.11,0,0,0,872,192.67a67.61,67.61,0,0,0,10.68-20.76l-4.77-1.59Q864.34,192.07,841.93,192.07ZM737.74,198.9Q734,193.26,734,180.67V6.59h0V.91H678.14l-.66-.05v5.7h0v0h.33c6.17.07,10.56,1.92,13.13,5.61s3.91,9.83,3.91,18.23V178.54a30.67,30.67,0,0,1-4.45,12.8,24.64,24.64,0,0,1-8.68,8.42,22,22,0,0,1-11,2.92q-26,0-25.59-62.46c-.06-14.51.06-42.06,7-59,2.27-5.55,6.52-9.14,12.52-9.14h.69v-5.3l-3.47-.2c-10.67.42-20.26,3-28.66,8.06q-13.71,8.22-21.48,24.66t-7.62,40.31q-.14,25.2,6.83,42t19.49,24.79q12.53,8,29.1,8,26.13,0,35.28-24.53v15h-.05v5.73h56.42v-.32h.11v-5.71Q741.52,204.53,737.74,198.9Zm-327-1.79q-1.86-4.25-1.86-11.8V70.06H318.44q0-19,1.72-29.35c1.15-6.94,2.14-12.16,5.7-17.57l.17-.26c7.36-11,17-17.13,26.58-17.13h.16V.07a61.6,61.6,0,0,0-6.26,0h-.34A112.3,112.3,0,0,0,325,2.85c-10.07,2.4-17.92,7.69-24.2,13.52Q279.41,37,279.33,70.06h-20v.28h0v5.44h20V185.31q0,7.56-1.86,11.8a11,11,0,0,1-5.89,6c-2.7,1.15-17.31,1.72-22.09,1.72q-6.49,0-10.27-1.72a10.4,10.4,0,0,1-5.44-6c-1.11-2.83-1.65-6.76-1.65-11.8V.72l-.1,0v0H175.29V6.41h.33v.15q9.56,0,13.46,5.64T193,30.43V185.31q0,7.56-1.72,11.8a10.74,10.74,0,0,1-5.44,6,23.91,23.91,0,0,1-9.45,1.83c-1.22,0-6.09-.09-6.09-.09-4.57,0-5.59-.55-7.18-4.37L87.65,20.36H77.08L62,62l55.55,142.76-22.83,0v5.71l245.52,0v-5.68h-.06v0q-10.87,0-16.3-4.24t-5.44-15.25V75.81h32.35q10.48,0,14.72,5.64t4.24,18.23v85.63q0,7.56-1.65,11.8a10.46,10.46,0,0,1-5.37,6q-3.72,1.72-10.35,1.72v0h-.13v5.68H428v-5.7q-7.17,0-11.27-1.72A10.92,10.92,0,0,1,410.73,197.11ZM385.67,55.33a26,26,0,1,0-25.85-26.18A26,26,0,0,0,385.67,55.33ZM34.46,150.24A34.49,34.49,0,0,0,0,184.7C0,204,15.46,219.61,34.46,219.61a34.69,34.69,0,0,0,0-69.37ZM990.6,196.61h5.31v14h2.93v-14h5.31v-2.7H990.6Zm29.84-2.7-5.09,7.9-5.09-7.9h-3.13v16.72H1010V198.68l5.23,7.84h.1l5.28-7.88v12h2.94V193.91Z"></path></svg>
                  </a>
                </div>
                <div style={{marginTop: 20, position: 'absolute', display: 'flex', right: 50}}>
                  {this.props.isAuthenticated ?
                    <div style={{display: 'flex'}}>
                      <a href={'/partners/' + this.props.username } style={{marginRight: 15}}>
                        <p className="menu-item-content">DASHBOARD</p>
                      </a>
                      <p className="menu-item-content" onClick={this.logout} style={{marginRight: 15, cursor: 'pointer'}}>LOGOUT</p>
                    </div>
                  :
                    <div style={{display: 'flex'}}>
                      <a href="/request-demo" style={{marginRight: 15}}>
                        <p className="menu-item-content">REQUEST DEMO</p>
                      </a>
                      <a href="/solutions" style={{marginRight: 15}}>
                        <p className="menu-item-content">SOLUTIONS</p>
                      </a>
                      <a href="/about" style={{marginRight: 15}}>
                        <p className="menu-item-content">ABOUT</p>
                      </a>
                      <a href="/contact-us" style={{marginRight: 15}}>
                        <p className="menu-item-content">CONTACT US</p>
                      </a>
                      <a href="/partners/login" style={{marginRight: 15}}>
                        <p className="menu-item-content">PARTNERS</p>
                      </a>
                    </div>
                  }
                </div>
              </nav>
            </div>
        </div>
      )
    } else {
      return (
        <div id="header">
          <div style={{zIndex: 99, height: '100%'}}>
            <nav style={{zIndex: 99, display: 'flex', width: '100vw', height: '100%', justifyContent: 'flex-start', paddingBottom: 10, backgroundColor: '#fff'}}>
              <div style={{marginTop: 15, marginBottom: 4, marginLeft: '8%', marginRight: 30}}>
                <a href="https://alfinder.com">
                  <svg id="AlfinderLogo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 219.61" style={{width: 115}}><defs></defs><title>Alfinder Logo</title><path style={{fill: '#3c2d64'}} d="M1024,91.81A25.86,25.86,0,1,1,998.14,66,26,26,0,0,1,1024,91.81Zm-42.77,113q-13.4,0-19.5-4.84t-6.09-17.44V70.06H899.05v5.68h.09v0q9.69,0,13.53,5.63t3.85,18.24v85.66q0,7.56-1.66,11.8a10.4,10.4,0,0,1-5.44,6q-3.78,1.72-10.28,1.72v5.7h83.17v-5.68h-1.08ZM579.14,197q-1.74-4.25-1.73-11.8V112.13q0-13.78-2-22a31.27,31.27,0,0,0-6.5-13.39,28.17,28.17,0,0,0-11.61-7.82q-7.1-2.66-18.23-2.66-32,0-44.38,24.91V70.37l-.32,0v-.36H437.88v5.68h.34v.34q9.67,0,13.52,5.64T455.59,100v85.66q0,7.56-1.66,11.8a10.37,10.37,0,0,1-5.44,6,23.75,23.75,0,0,1-9,1.68h-1.34v5.68h.06v.07l1.82-.07h67.82l1.56.07V205.1h-.06v0h-.45a17.89,17.89,0,0,1-8.11-1.68,10.2,10.2,0,0,1-4.64-6,37.82,37.82,0,0,1-1.45-11.8V106.42a34.63,34.63,0,0,1,3.41-12.78,28.49,28.49,0,0,1,9.74-11.34,24,24,0,0,1,13.59-4.11q9.56,0,13.2,5.7a20.73,20.73,0,0,1,2.19,5.21,50.18,50.18,0,0,1,1.32,11.74v84.47a39.67,39.67,0,0,1-1.39,11.8,10.73,10.73,0,0,1-3.06,4.9,8.73,8.73,0,0,1-1.38,1q-3.18,1.72-8.75,1.72v.1h-.14v5.7h71.23v-.11h.11v-5.7q-6.49,0-10.21-1.72A10.65,10.65,0,0,1,579.14,197Zm262.79-4.93a29.84,29.84,0,0,1-17.18-5.5q-8-5.5-13.06-17.37t-5-29.91l-.14-17.9q1.47-25.32,7.9-37.32t16.11-12q9.54,0,14.25,14.05l.09.28a37.16,37.16,0,0,1,.76,19.73c-2,8.73-7.92,14.78-16.89,14.78H828v5.68l25.71,0a25.21,25.21,0,0,0,22.46-36.62q-12-23.58-43.9-23.58-19.62,0-34.61,8.49t-23.47,25.39q-8.49,16.92-8.49,41.58,0,24.12,7.9,40.37t22,24.2q14.13,8,32.82,8a51.91,51.91,0,0,0,25.27-6A56.11,56.11,0,0,0,872,192.67a67.61,67.61,0,0,0,10.68-20.76l-4.77-1.59Q864.34,192.07,841.93,192.07ZM737.74,198.9Q734,193.26,734,180.67V6.59h0V.91H678.14l-.66-.05v5.7h0v0h.33c6.17.07,10.56,1.92,13.13,5.61s3.91,9.83,3.91,18.23V178.54a30.67,30.67,0,0,1-4.45,12.8,24.64,24.64,0,0,1-8.68,8.42,22,22,0,0,1-11,2.92q-26,0-25.59-62.46c-.06-14.51.06-42.06,7-59,2.27-5.55,6.52-9.14,12.52-9.14h.69v-5.3l-3.47-.2c-10.67.42-20.26,3-28.66,8.06q-13.71,8.22-21.48,24.66t-7.62,40.31q-.14,25.2,6.83,42t19.49,24.79q12.53,8,29.1,8,26.13,0,35.28-24.53v15h-.05v5.73h56.42v-.32h.11v-5.71Q741.52,204.53,737.74,198.9Zm-327-1.79q-1.86-4.25-1.86-11.8V70.06H318.44q0-19,1.72-29.35c1.15-6.94,2.14-12.16,5.7-17.57l.17-.26c7.36-11,17-17.13,26.58-17.13h.16V.07a61.6,61.6,0,0,0-6.26,0h-.34A112.3,112.3,0,0,0,325,2.85c-10.07,2.4-17.92,7.69-24.2,13.52Q279.41,37,279.33,70.06h-20v.28h0v5.44h20V185.31q0,7.56-1.86,11.8a11,11,0,0,1-5.89,6c-2.7,1.15-17.31,1.72-22.09,1.72q-6.49,0-10.27-1.72a10.4,10.4,0,0,1-5.44-6c-1.11-2.83-1.65-6.76-1.65-11.8V.72l-.1,0v0H175.29V6.41h.33v.15q9.56,0,13.46,5.64T193,30.43V185.31q0,7.56-1.72,11.8a10.74,10.74,0,0,1-5.44,6,23.91,23.91,0,0,1-9.45,1.83c-1.22,0-6.09-.09-6.09-.09-4.57,0-5.59-.55-7.18-4.37L87.65,20.36H77.08L62,62l55.55,142.76-22.83,0v5.71l245.52,0v-5.68h-.06v0q-10.87,0-16.3-4.24t-5.44-15.25V75.81h32.35q10.48,0,14.72,5.64t4.24,18.23v85.63q0,7.56-1.65,11.8a10.46,10.46,0,0,1-5.37,6q-3.72,1.72-10.35,1.72v0h-.13v5.68H428v-5.7q-7.17,0-11.27-1.72A10.92,10.92,0,0,1,410.73,197.11ZM385.67,55.33a26,26,0,1,0-25.85-26.18A26,26,0,0,0,385.67,55.33ZM34.46,150.24A34.49,34.49,0,0,0,0,184.7C0,204,15.46,219.61,34.46,219.61a34.69,34.69,0,0,0,0-69.37ZM990.6,196.61h5.31v14h2.93v-14h5.31v-2.7H990.6Zm29.84-2.7-5.09,7.9-5.09-7.9h-3.13v16.72H1010V198.68l5.23,7.84h.1l5.28-7.88v12h2.94V193.91Z"></path></svg>
                </a>
              </div>
            </nav>
          </div>
      </div>
      );
      }
  }
}


const mapStateToProps = state => ({
  username: state.authReducer.username,
  isAuthenticated: state.authReducer.isAuthenticated,
})

export default connect(mapStateToProps, {
  authLogout,
})(Header)
